(this.webpackJsonpfakeshop=this.webpackJsonpfakeshop||[]).push([[0],{31:function(e,t,r){},32:function(e,t,r){"use strict";r.r(t);var n=r(1),s=r.n(n),a=r(18),c=r.n(a),o=r(2),i=r(9),l=r(4),u=r.n(l),j=r(6),b=r(3),h=Object(n.createContext)(null),d=r(0),p=function(){var e="https://desolate-spire-28464.herokuapp.com/api/",t=Object(n.useContext)(h),r=t.username,s=t.setUsername,a=Object(b.f)(),c=Object(b.g)();function o(){return(o=Object(j.a)(u.a.mark((function t(){var r,n,o;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=localStorage.getItem("sessionID"),t.prev=1,t.next=4,fetch(e+"getUsername/"+r);case 4:return n=t.sent,t.next=7,n.json();case 7:if((o=t.sent).username||["/login","/register"].includes(c.pathname)){t.next=11;break}return a.push("/login"),t.abrupt("return");case 11:s(o.username),t.next=16;break;case 14:t.prev=14,t.t0=t.catch(1);case 16:case"end":return t.stop()}}),t,null,[[1,14]])})))).apply(this,arguments)}return Object(n.useEffect)((function(){!function(){o.apply(this,arguments)}()}),[]),Object(d.jsxs)("div",{children:[Object(d.jsx)("h6",{className:"text-white",children:r}),Object(d.jsxs)("div",{className:"d-flex flex-row",children:[Object(d.jsx)(i.b,{className:"mr-3",to:"/login",onClick:function(){localStorage.removeItem("sessionID"),s("")},children:r&&r.length>0?Object(d.jsx)("h5",{className:"text-primary",children:"logout"}):"/register"===c.pathname?Object(d.jsx)("h5",{children:"Login"}):void 0}),Object(d.jsx)(i.b,{to:"/register",children:function(){if("/register"!==c.pathname)return r?void 0:Object(d.jsx)("h5",{className:"font-weight-bold",children:"Register"})}()})]})]})},m=function(){return Object(d.jsxs)("div",{className:"bg-dark navbar w-100 fixed-top",children:[Object(d.jsx)(i.b,{to:"/home",children:Object(d.jsx)("h1",{className:"navbar-brand mx-3 text-light",children:"TEMPORARYNAMEgay"})}),Object(d.jsx)(p,{})]})},O=function(){return Object(d.jsx)("div",{children:Object(d.jsx)(m,{})})},x=function(){return Object(d.jsx)("div",{className:"bg-dark w-100",style:{position:"fixed",bottom:0},children:Object(d.jsx)("h6",{className:"text-light m-2",children:"I am footer"})})},f=function(){var e=Object(n.useState)(""),t=Object(o.a)(e,2),r=t[0],s=t[1],a=Object(n.useState)(""),c=Object(o.a)(a,2),i=c[0],l=c[1],p=Object(n.useState)(""),m=Object(o.a)(p,2),O=m[0],x=m[1],f=Object(b.f)(),v=Object(n.useContext)(h),g=(v.username,v.setUsername),N="https://desolate-spire-28464.herokuapp.com/api/";function y(){return(y=Object(j.a)(u.a.mark((function e(t){var n,s,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n={username:r,password:i},N+"login",e.prev=3,e.next=6,fetch("https://desolate-spire-28464.herokuapp.com/api/login",{body:JSON.stringify(n),headers:{"Content-Type":"application/json"},method:"POST"});case 6:return s=e.sent,e.next=9,s.json();case 9:if(!(a=e.sent).hasOwnProperty("error")){e.next=13;break}return x(a.error),e.abrupt("return");case 13:console.log("set sessionid"),localStorage.setItem("sessionID",a.sessionID),g(r),f.push("/"),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(3),console.log(e.t0);case 22:case"end":return e.stop()}}),e,null,[[3,19]])})))).apply(this,arguments)}return Object(d.jsx)("div",{className:"container",children:Object(d.jsx)("div",{className:"row",children:Object(d.jsxs)("div",{className:"col-12 col-sm-8 offset-sm-2 col-xl-6 offset-xl-3",children:[Object(d.jsxs)("form",{className:"mt-5",children:[Object(d.jsx)("h1",{className:"mb-4 text-center",children:"Login"}),Object(d.jsxs)("div",{className:"form-group mb-2",children:[Object(d.jsx)("label",{children:"Username"}),Object(d.jsx)("input",{type:"text",value:r,onChange:function(e){return s(e.target.value)},className:"form-control",placeholder:"Enter username"})]}),Object(d.jsxs)("div",{className:"form-group mb-3",children:[Object(d.jsx)("label",{children:"Password"}),Object(d.jsx)("input",{type:"password",value:i,onChange:function(e){return l(e.target.value)},className:"form-control",placeholder:"Enter password"})]}),Object(d.jsx)("button",{type:"submit",onClick:function(e){return y.apply(this,arguments)},className:"btn btn-primary",children:"Submit"})]}),O.length>0&&Object(d.jsx)("h5",{className:"mt-3 alert alert-danger",children:O})]})})})},v=function(e){var t=e.post;return Object(d.jsxs)("div",{className:"container my-3 border border-secondary rounded bg-dark",children:[Object(d.jsx)("div",{className:"row p-2",children:Object(d.jsx)("p",{className:"text-white",children:t.content})}),Object(d.jsxs)("div",{className:"row pl-2",children:[Object(d.jsxs)("h6",{className:"text-white",children:["-",t.username]}),Object(d.jsx)("h6",{className:"ml-3 text-white",children:t.date})]})]})},g=function(e){var t=e.threadID,r=e.loadThread,s=Object(n.useState)(!1),a=Object(o.a)(s,2),c=a[0],i=a[1],l="https://desolate-spire-28464.herokuapp.com/api/",b=Object(n.useState)(""),p=Object(o.a)(b,2),m=p[0],O=p[1],x=Object(n.useContext)(h).username;function f(){return v.apply(this,arguments)}function v(){return(v=Object(j.a)(u.a.mark((function e(){var n,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={username:x,content:m,date:(new Date).toLocaleString(),threadID:t},e.prev=1,e.next=4,fetch(l+"makePost",{body:JSON.stringify(n),headers:{"Content-Type":"application/json"},method:"POST"});case 4:return s=e.sent,e.next=7,s.json();case 7:e.sent,r(),i((function(e){return!e})),e.next=14;break;case 12:e.prev=12,e.t0=e.catch(1);case 14:case"end":return e.stop()}}),e,null,[[1,12]])})))).apply(this,arguments)}return Object(d.jsx)("div",{className:"mb-5",children:c?Object(d.jsxs)("div",{className:"form-group mt-4",children:[Object(d.jsx)("label",{className:"",children:"Content"}),Object(d.jsx)("textarea",{onChange:function(e){return O(e.target.value)},className:"form-control border border-secondary"}),Object(d.jsx)("button",{onClick:f,className:"btn btn-primary mt-2",children:"Submit"})]}):Object(d.jsx)("button",{className:"btn btn-primary",onClick:function(){return i((function(e){return!e}))},children:"Add Post"})})},N=function(){var e=Object(n.useState)([]),t=Object(o.a)(e,2),r=(t[0],t[1],Object(n.useState)({title:"",content:"",username:"",_id:"",posts:[]})),s=Object(o.a)(r,2),a=s[0],c=s[1],i="https://desolate-spire-28464.herokuapp.com/api/",l=Object(b.h)().id;function h(){return p.apply(this,arguments)}function p(){return(p=Object(j.a)(u.a.mark((function e(){var t,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(i+"getThread/"+l);case 2:return t=e.sent,e.next=5,t.json();case 5:r=e.sent,c(r);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(n.useEffect)((function(){h()}),[]),Object(d.jsxs)("div",{className:"container mt-3",children:[Object(d.jsx)("h1",{children:a.title}),Object(d.jsxs)("h6",{children:["- ",a.username]}),Object(d.jsx)("p",{children:a.content}),Object(d.jsx)("h4",{className:"mt-5",children:"Replies:"}),a.posts.map((function(e,t){return Object(d.jsx)(v,{post:e},t)})),Object(d.jsx)(g,{threadID:l,loadThread:h})]})},y=function(){var e=Object(n.useState)(""),t=Object(o.a)(e,2),r=t[0],s=t[1],a=Object(n.useState)(""),c=Object(o.a)(a,2),i=c[0],l=c[1],h=Object(n.useState)(""),p=Object(o.a)(h,2),m=p[0],O=p[1],x=Object(n.useState)(""),f=Object(o.a)(x,2),v=f[0],g=f[1],N=Object(n.useState)(""),y=Object(o.a)(N,2),w=y[0],k=y[1],S="https://desolate-spire-28464.herokuapp.com/api/",C=Object(b.f)();function T(){if(i===m)return!0}function P(){return(P=Object(j.a)(u.a.mark((function e(t){var n,s,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),k(""),g(""),T()){e.next=5;break}return e.abrupt("return");case 5:return n={username:r,password:i},S+"register",e.prev=7,e.next=10,fetch("https://desolate-spire-28464.herokuapp.com/api/register",{body:JSON.stringify(n),headers:{"Content-Type":"application/json"},method:"POST"});case 10:return s=e.sent,e.next=13,s.json();case 13:if(!(a=e.sent).hasOwnProperty("error")){e.next=17;break}return k(a.error),e.abrupt("return");case 17:return g(a.status),e.next=20,new Promise((function(e){return setTimeout(e,1500)}));case 20:C.push("/login"),console.log(a),e.next=27;break;case 24:e.prev=24,e.t0=e.catch(7),console.log(e.t0);case 27:case"end":return e.stop()}}),e,null,[[7,24]])})))).apply(this,arguments)}return Object(d.jsx)("div",{className:"container",children:Object(d.jsx)("div",{className:"row",children:Object(d.jsxs)("div",{className:"col-12 col-sm-8 offset-sm-2 col-xl-6 offset-xl-3",children:[Object(d.jsxs)("form",{className:"mt-5",children:[Object(d.jsx)("h1",{className:"mb-4 text-center",children:"Register"}),Object(d.jsxs)("div",{className:"form-group mb-2",children:[Object(d.jsx)("label",{children:"Username"}),Object(d.jsx)("input",{type:"text",value:r,onChange:function(e){return s(e.target.value)},className:"form-control",placeholder:"Enter username"})]}),Object(d.jsxs)("div",{className:"form-group mb-2",children:[Object(d.jsx)("label",{children:"Password"}),Object(d.jsx)("input",{type:"password",value:i,onChange:function(e){return l(e.target.value)},className:"form-control",placeholder:"Enter password"})]}),Object(d.jsxs)("div",{className:"form-group mb-3",children:[Object(d.jsx)("label",{children:"Confirm Password"}),Object(d.jsx)("input",{type:"password",value:m,onChange:function(e){return O(e.target.value)},className:"form-control",placeholder:"Enter password"})]}),Object(d.jsx)("button",{type:"submit",onClick:function(e){return function(e){return P.apply(this,arguments)}(e)},className:"btn btn-primary",children:"Submit"})]}),v.length>0&&Object(d.jsx)("h5",{className:"mt-3 alert alert-success",children:v}),w.length>0&&Object(d.jsx)("h5",{className:"mt-3 alert alert-danger",children:w})]})})})},w=function(e){e.threadID;var t=e.loadThreads,r=Object(n.useState)(!1),s=Object(o.a)(r,2),a=s[0],c=s[1],i="https://desolate-spire-28464.herokuapp.com/api/",l=Object(n.useState)(""),b=Object(o.a)(l,2),p=b[0],m=b[1],O=Object(n.useState)(""),x=Object(o.a)(O,2),f=x[0],v=x[1],g=Object(n.useContext)(h).username;function N(){return y.apply(this,arguments)}function y(){return(y=Object(j.a)(u.a.mark((function e(){var r,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={username:g,content:p,title:f},e.prev=1,e.next=4,fetch(i+"newThread",{body:JSON.stringify(r),headers:{"Content-Type":"application/json"},method:"POST"});case 4:return n=e.sent,e.next=7,n.json();case 7:e.sent,t(),c((function(e){return!e})),e.next=14;break;case 12:e.prev=12,e.t0=e.catch(1);case 14:case"end":return e.stop()}}),e,null,[[1,12]])})))).apply(this,arguments)}return Object(d.jsx)("div",{className:"mb-5",children:a?Object(d.jsxs)("div",{className:"form-group mt-4",children:[Object(d.jsx)("label",{className:"",children:"Title"}),Object(d.jsx)("input",{type:"text",className:"form-control",onChange:function(e){return v(e.target.value)}}),Object(d.jsx)("label",{className:"",children:"Content"}),Object(d.jsx)("textarea",{onChange:function(e){return m(e.target.value)},className:"form-control border border-secondary"}),Object(d.jsx)("button",{onClick:N,className:"btn btn-primary mt-2",children:"Submit"})]}):Object(d.jsx)("button",{className:"btn btn-primary",onClick:function(){return c((function(e){return!e}))},children:"Add Thread"})})},k=function(e){var t=e.thread,r=t._id,n=t.title,s=t.content;Object(b.f)();return Object(d.jsx)(i.b,{to:"/thread/".concat(r),children:Object(d.jsxs)("div",{className:"border border-primary rounded my-2 p-2",children:[Object(d.jsx)("h4",{children:n}),Object(d.jsx)("p",{children:s})]})})},S=function(){var e=Object(n.useState)([]),t=Object(o.a)(e,2),r=t[0],s=t[1],a="https://desolate-spire-28464.herokuapp.com/api/";function c(){return i.apply(this,arguments)}function i(){return(i=Object(j.a)(u.a.mark((function e(){var t,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("https://desolate-spire-28464.herokuapp.com/api/"),e.next=3,fetch(a+"getThreads");case 3:return t=e.sent,e.next=6,t.json();case 6:r=e.sent,s(r);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(n.useEffect)((function(){c()}),[]),Object(d.jsxs)("div",{className:"container",children:[Object(d.jsx)("h1",{className:"font-weight-bold my-3",children:"Home page"}),r.map((function(e){return Object(d.jsx)(k,{thread:e},e._id)})),Object(d.jsx)(w,{loadThreads:c})]})};r(31);var C=function(){var e=Object(n.useState)(""),t=Object(o.a)(e,2),r=t[0],s=t[1];return Object(d.jsx)(i.a,{basename:"/",children:Object(d.jsxs)(h.Provider,{value:{username:r,setUsername:s},children:[Object(d.jsx)(O,{}),Object(d.jsxs)(b.c,{children:[Object(d.jsx)(b.a,{path:"/register",children:Object(d.jsx)(y,{})}),Object(d.jsx)(b.a,{path:"/login",children:Object(d.jsx)(f,{})}),Object(d.jsx)(b.a,{path:"/thread/:id",children:Object(d.jsx)(N,{})}),Object(d.jsx)(b.a,{path:"/",children:Object(d.jsx)(S,{})})]}),Object(d.jsx)(x,{})]})})};c.a.render(Object(d.jsx)(s.a.StrictMode,{children:Object(d.jsx)(C,{})}),document.getElementById("root"))}},[[32,1,2]]]);
//# sourceMappingURL=main.43141242.chunk.js.map