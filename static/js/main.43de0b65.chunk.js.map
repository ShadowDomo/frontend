{"version":3,"sources":["UserContext.tsx","NavBarProfile.tsx","NavBar.tsx","Header.tsx","Footer.tsx","Login.tsx","Post.tsx","AddPost.tsx","Thread.tsx","Register.tsx","AddThread.tsx","ThreadCard.tsx","Home.jsx","App.tsx","index.js"],"names":["UserContext","createContext","NavBarProfile","server","process","useContext","username","setUsername","history","useHistory","location","useLocation","a","sessionID","localStorage","getItem","fetch","result","json","jsoned","includes","pathname","push","useEffect","getUsername","className","to","onClick","removeItem","length","renderRegister","NavBar","Header","Footer","style","position","bottom","Login","useState","password","setPassword","status","setStatus","setUsernameAlias","e","preventDefault","obj","body","JSON","stringify","headers","method","response","hasOwnProperty","error","setItem","type","value","onChange","target","placeholder","Post","post","content","date","AddPost","threadID","loadThread","addPostOn","setAddPostOn","setContent","makePost","Date","toLocaleString","current","Thread","title","_id","posts","thread","setThread","id","useParams","hist","res","deleteThread","console","log","Provider","size","cursor","renderOwnerActions","map","index","Register","confirmPassword","setConfirmPassword","setError","checkPasswordsSame","Promise","r","setTimeout","registerUser","AddThread","loadThreads","addThreadOn","setAddThreadOn","setTitle","makeThread","ThreadCard","Home","threads","setThreads","App","basename","path","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.43de0b65.chunk.js","sourcesContent":["import { createContext } from \"react\";\r\n\r\nexport const UserContext = createContext<any>(null);\r\n","import { useContext } from \"react\";\r\nimport { useState, useEffect } from \"react\";\r\nimport { Link, useHistory, useLocation } from \"react-router-dom\";\r\nimport { UserContext } from \"./UserContext\";\r\n\r\nconst NavBarProfile = () => {\r\n  const server = process.env.REACT_APP_API_SERVER;\r\n  const { username, setUsername } = useContext(UserContext);\r\n  const history = useHistory();\r\n  const location = useLocation();\r\n\r\n  async function getUsername() {\r\n    const sessionID = localStorage.getItem(\"sessionID\");\r\n    try {\r\n      const result = await fetch(server + \"getUsername/\" + sessionID);\r\n      const jsoned = await result.json();\r\n\r\n      // redirect to login if not logged in\r\n      if (\r\n        !jsoned.username &&\r\n        ![\"/login\", \"/register\"].includes(location.pathname)\r\n      ) {\r\n        history.push(\"/login\");\r\n        return;\r\n      }\r\n      setUsername(jsoned.username);\r\n    } catch (error) {\r\n      // TODO\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    getUsername();\r\n  }, []);\r\n\r\n  /** Logs the user out. */\r\n  function logout() {\r\n    localStorage.removeItem(\"sessionID\");\r\n    setUsername(\"\");\r\n  }\r\n\r\n  /** Render logout button if logged in */\r\n  function renderLogoutConditionally() {\r\n    // if logged in\r\n    if (username && username.length > 0) {\r\n      return <h5 className=\"text-primary\">logout</h5>;\r\n    }\r\n\r\n    if (location.pathname === \"/register\") {\r\n      return <h5>Login</h5>;\r\n    }\r\n  }\r\n\r\n  /** Render Register button if not logged in */\r\n  function renderRegister() {\r\n    if (location.pathname === \"/register\") {\r\n      return;\r\n    }\r\n\r\n    // if logged out and not on register page\r\n    if (!username) {\r\n      return <h5 className=\"font-weight-bold\">Register</h5>;\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <h6 className=\"text-white\">{username}</h6>\r\n      <div className=\"d-flex flex-row\">\r\n        <Link className=\"mr-3\" to=\"/login\" onClick={logout}>\r\n          {renderLogoutConditionally()}\r\n        </Link>\r\n        <Link to=\"/register\">{renderRegister()}</Link>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default NavBarProfile;\r\n","import { Link } from \"react-router-dom\";\r\nimport NavBarProfile from \"./NavBarProfile\";\r\n\r\nconst NavBar = () => {\r\n  return (\r\n    <div className=\"bg-dark navbar w-100 static-top\">\r\n      <Link to=\"/home\">\r\n        <h1 className=\"navbar-brand mx-3 text-light\">TEMPORARYNAMEgay</h1>\r\n      </Link>\r\n\r\n      <NavBarProfile />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default NavBar;\r\n","import NavBar from \"./NavBar\";\r\nimport { createContext, useState } from \"react\";\r\n\r\n// interface UserContextType {\r\n//   username: string | null;\r\n//   setUsername: React.Dispatch<React.SetStateAction<string>>;\r\n// }\r\n\r\nconst Header = () => {\r\n  return (\r\n    <div>\r\n      <NavBar />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Header;\r\n","\r\nconst Footer = () => {\r\n  return (\r\n    <div className='bg-dark w-100' style={{ position: 'fixed', bottom: 0 }}>\r\n      <h6 className='text-light m-2'>I am footer</h6>\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\nexport default Footer\r\n","import React, { useState, useContext } from \"react\";\r\nimport { useHistory, Link } from \"react-router-dom\";\r\nimport { UserContext } from \"./UserContext\";\r\n\r\nconst Login: React.FC = () => {\r\n  const [username, setUsername] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [status, setStatus] = useState(\"\");\r\n  const history = useHistory();\r\n  const { username: usernameAlias, setUsername: setUsernameAlias } = useContext(\r\n    UserContext\r\n  );\r\n\r\n  // TODO display login status in navbar\r\n  // TODO if sessionID set, then redirect?\r\n  // TODO if manually visit page, then loggout\r\n  // TODO put server globally somewhere\r\n  const server = process.env.REACT_APP_API_SERVER;\r\n\r\n  /** Logs the user in. */\r\n  async function login(e: React.MouseEvent) {\r\n    e.preventDefault();\r\n\r\n    const obj = {\r\n      username: username,\r\n      password: password,\r\n    };\r\n\r\n    // send off to server\r\n    const url = server + \"login\";\r\n    try {\r\n      const result = await fetch(url, {\r\n        body: JSON.stringify(obj),\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        method: \"POST\",\r\n      });\r\n      const response = await result.json();\r\n\r\n      if (response.hasOwnProperty(\"error\")) {\r\n        setStatus(response.error);\r\n        return;\r\n      }\r\n      localStorage.setItem(\"sessionID\", response.sessionID);\r\n\r\n      // username already used locally, so need different var name\r\n      setUsernameAlias(username);\r\n      history.push(\"/\");\r\n    } catch (err) {\r\n      setStatus(\"Failed to login. Please try again.\");\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      <div className=\"row\">\r\n        <div className=\"col-12 col-sm-8 offset-sm-2 col-xl-6 offset-xl-3\">\r\n          <form className=\"mt-5\">\r\n            <h1 className=\"mb-4 text-center\">Login</h1>\r\n            <div className=\"form-group mb-2\">\r\n              <label>Username</label>\r\n              <input\r\n                type=\"text\"\r\n                value={username}\r\n                onChange={(e) => setUsername(e.target.value)}\r\n                className=\"form-control\"\r\n                placeholder=\"Enter username\"\r\n              />\r\n            </div>\r\n            <div className=\"form-group mb-3\">\r\n              <label>Password</label>\r\n              <input\r\n                type=\"password\"\r\n                value={password}\r\n                onChange={(e) => setPassword(e.target.value)}\r\n                className=\"form-control\"\r\n                placeholder=\"Enter password\"\r\n              />\r\n            </div>\r\n            <button type=\"submit\" onClick={login} className=\"btn btn-primary\">\r\n              Submit\r\n            </button>\r\n          </form>\r\n          <Link to=\"/register\">\r\n            <div className=\"mt-1\">New user? Click here to register!</div>\r\n          </Link>\r\n          {status.length > 0 && (\r\n            <h5 className=\"mt-3 alert alert-danger\">{status}</h5>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n","import { PostObj } from \"./Thread\";\r\n\r\ninterface Props {\r\n  post: PostObj;\r\n}\r\n\r\n// TODO format date properly\r\n\r\nconst Post = ({ post }: Props) => {\r\n  // to find difference in date\r\n  // const currentTime = new Date().getTime();\r\n\r\n  return (\r\n    <div className=\"container my-3 border border-secondary rounded bg-dark\">\r\n      <div className=\"row p-2\">\r\n        {<p className=\"text-white\">{post.content}</p>}\r\n      </div>\r\n      <div className=\"row pl-2\">\r\n        {<h6 className=\"text-white\">-{post.username}</h6>}\r\n        {<h6 className=\"ml-3 text-white\">{post.date}</h6>}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Post;\r\n","import { useState, useContext } from \"react\";\r\nimport { UserContext } from \"./UserContext\";\r\ninterface Props {\r\n  threadID: string;\r\n  loadThread: () => void;\r\n}\r\n\r\ninterface Post {\r\n  username: string;\r\n  content: string;\r\n  date: string;\r\n  threadID: string;\r\n}\r\n\r\nconst AddPost = ({ threadID, loadThread }: Props) => {\r\n  const [addPostOn, setAddPostOn] = useState<boolean>(false);\r\n  const server = process.env.REACT_APP_API_SERVER;\r\n  const [content, setContent] = useState<string>(\"\");\r\n  const { username } = useContext(UserContext);\r\n\r\n  /** Makes a post to the server */\r\n  async function makePost() {\r\n    const post: Post = {\r\n      username: username, // username temp\r\n      content: content,\r\n      date: new Date().toLocaleString(),\r\n      threadID: threadID,\r\n    };\r\n\r\n    try {\r\n      const result = await fetch(server + \"makePost\", {\r\n        body: JSON.stringify(post),\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        method: \"POST\",\r\n      });\r\n      const response = await result.json();\r\n      loadThread();\r\n      setAddPostOn((current) => !current);\r\n    } catch (error) {\r\n      // TODO error handling\r\n    }\r\n  }\r\n\r\n  /** Renders the input form if needed */\r\n  function inputForm() {\r\n    if (addPostOn) {\r\n      return (\r\n        <div className=\"form-group mt-4\">\r\n          <label className=\"\">Content</label>\r\n          <textarea\r\n            onChange={(e) => setContent(e.target.value)}\r\n            className=\"form-control border border-secondary\"\r\n          />\r\n          <button onClick={makePost} className=\"btn btn-primary mt-2\">\r\n            Submit\r\n          </button>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <button\r\n        className=\"btn btn-primary\"\r\n        onClick={() => setAddPostOn((current) => !current)}\r\n      >\r\n        Add Post\r\n      </button>\r\n    );\r\n  }\r\n\r\n  return <div className=\"mb-5\">{inputForm()}</div>;\r\n};\r\n\r\nexport default AddPost;\r\n","import { useState, useEffect, useContext } from \"react\";\r\nimport { IconContext } from \"react-icons\";\r\nimport { ImCross } from \"react-icons/im\";\r\nimport { Link, useParams, useHistory } from \"react-router-dom\";\r\nimport Post from \"./Post\";\r\nimport AddPost from \"./AddPost\";\r\nimport { UserContext } from \"./UserContext\";\r\n\r\nexport interface PostObj {\r\n  username: string;\r\n  content: string;\r\n  date: string; // TODO change\r\n}\r\n\r\nexport interface ThreadObject {\r\n  title: string;\r\n  username: string;\r\n  content: string;\r\n  _id: string;\r\n  posts: PostObj[];\r\n}\r\n\r\n// TODO on making thread, if no username, then anonymous\r\n// TODO logged in username displayed\r\n// TODO make new threads\r\n// TODO make new posts on thread\r\n// TODO if your own post / thread, you can delete\r\nconst Thread = () => {\r\n  const [posts, setPosts] = useState([]);\r\n  const defaultThread: ThreadObject = {\r\n    title: \"\",\r\n    content: \"\",\r\n    username: \"\",\r\n    _id: \"\",\r\n    posts: [],\r\n  };\r\n\r\n  const { username, setUsername } = useContext(UserContext);\r\n  const [thread, setThread] = useState<ThreadObject>(defaultThread);\r\n  const server = process.env.REACT_APP_API_SERVER;\r\n  const { id } = useParams<{ id: string }>();\r\n  const hist = useHistory();\r\n\r\n  async function loadThread() {\r\n    const res = await fetch(server + \"getThread/\" + id);\r\n    const jsoned = await res.json();\r\n    setThread(jsoned);\r\n  }\r\n\r\n  async function deleteThread() {\r\n    // TODO are u sure\r\n    const res = await fetch(server + \"deleteThread/\" + id);\r\n    console.log(res.json());\r\n\r\n    // redirect to home\r\n    hist.push(\"/home\");\r\n  }\r\n\r\n  /** Renders possible actions for owner of a thread. */\r\n  function renderOwnerActions() {\r\n    if (thread.username === username) {\r\n      return (\r\n        <IconContext.Provider value={{ size: \"1em\" }}>\r\n          <ImCross\r\n            onClick={deleteThread}\r\n            style={{ cursor: \"pointer\" }}\r\n            className=\"ml-2\"\r\n          />\r\n        </IconContext.Provider>\r\n      );\r\n    }\r\n  }\r\n\r\n  // load all the posts for given thread\r\n  useEffect(() => {\r\n    loadThread();\r\n  }, []);\r\n\r\n  // TODO if posts are empty, say no posts\r\n  return (\r\n    <div className=\"container mt-3\">\r\n      <div className=\"row\">\r\n        <div className=\"col d-inline-flex align-items-center\">\r\n          <h1 className=\"mb-0\">{thread.title}</h1>\r\n          {renderOwnerActions()}\r\n        </div>\r\n      </div>\r\n      <h6>- {thread.username}</h6>\r\n      <p>{thread.content}</p>\r\n      <h4 className=\"mt-5\">Replies:</h4>\r\n\r\n      {thread.posts.map((post, index) => (\r\n        <Post key={index} post={post} />\r\n      ))}\r\n      <AddPost threadID={id} loadThread={loadThread} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Thread;\r\n","import { useState } from \"react\";\r\nimport { useHistory, Link } from \"react-router-dom\";\r\nconst Register = () => {\r\n  const [username, setUsername] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [confirmPassword, setConfirmPassword] = useState(\"\");\r\n  const [status, setStatus] = useState(\"\");\r\n  const [error, setError] = useState(\"\");\r\n\r\n  const server = process.env.REACT_APP_API_SERVER;\r\n  const history = useHistory();\r\n  /** Checks if the passwords are the same. */\r\n  function checkPasswordsSame() {\r\n    if (password === confirmPassword) {\r\n      return true;\r\n    }\r\n  }\r\n\r\n  /** Registers the user. */\r\n  async function registerUser(\r\n    e: React.MouseEvent<HTMLButtonElement, MouseEvent>\r\n  ) {\r\n    e.preventDefault();\r\n    setError(\"\");\r\n    setStatus(\"\");\r\n\r\n    if (!checkPasswordsSame()) {\r\n      return;\r\n    }\r\n\r\n    const obj = {\r\n      username: username,\r\n      password: password,\r\n    };\r\n\r\n    // send off to server\r\n    const url = server + \"register\";\r\n    try {\r\n      const result = await fetch(url, {\r\n        body: JSON.stringify(obj),\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        method: \"POST\",\r\n      });\r\n      const response = await result.json();\r\n\r\n      if (response.hasOwnProperty(\"error\")) {\r\n        setError(response.error);\r\n        // setStatus(response.error)\r\n        return;\r\n      }\r\n\r\n      setStatus(response.status);\r\n\r\n      // delay before redirect\r\n      await new Promise((r) => setTimeout(r, 1500));\r\n\r\n      // redirect to home\r\n      history.push(\"/login\");\r\n\r\n      // TODO if it fails??\r\n      console.log(response);\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n  }\r\n  return (\r\n    <div className=\"container\">\r\n      <div className=\"row\">\r\n        <div className=\"col-12 col-sm-8 offset-sm-2 col-xl-6 offset-xl-3\">\r\n          <form className=\"mt-5\">\r\n            <h1 className=\"mb-4 text-center\">Register</h1>\r\n            <div className=\"form-group mb-2\">\r\n              <label>Username</label>\r\n              <input\r\n                type=\"text\"\r\n                value={username}\r\n                onChange={(e) => setUsername(e.target.value)}\r\n                className=\"form-control\"\r\n                placeholder=\"Enter username\"\r\n              />\r\n            </div>\r\n            <div className=\"form-group mb-2\">\r\n              <label>Password</label>\r\n              <input\r\n                type=\"password\"\r\n                value={password}\r\n                onChange={(e) => setPassword(e.target.value)}\r\n                className=\"form-control\"\r\n                placeholder=\"Enter password\"\r\n              />\r\n            </div>\r\n            <div className=\"form-group mb-3\">\r\n              <label>Confirm Password</label>\r\n              <input\r\n                type=\"password\"\r\n                value={confirmPassword}\r\n                onChange={(e) => setConfirmPassword(e.target.value)}\r\n                className=\"form-control\"\r\n                placeholder=\"Enter password\"\r\n              />\r\n            </div>\r\n            <button\r\n              type=\"submit\"\r\n              onClick={(e) => registerUser(e)}\r\n              className=\"btn btn-primary\"\r\n            >\r\n              Submit\r\n            </button>\r\n          </form>\r\n          <Link to=\"/login\">\r\n            <div className=\"mt-1\">Already registered? Click here to login!</div>\r\n          </Link>\r\n          {status.length > 0 && (\r\n            <h5 className=\"mt-3 alert alert-success\">{status}</h5>\r\n          )}\r\n          {error.length > 0 && (\r\n            <h5 className=\"mt-3 alert alert-danger\">{error}</h5>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Register;\r\n","import { useState, useContext } from \"react\";\r\nimport { UserContext } from \"./UserContext\";\r\n\r\ninterface Props {\r\n  threadID: string;\r\n  loadThreads: () => void;\r\n}\r\n\r\ninterface NewThread {\r\n  username: string;\r\n  content: string;\r\n  title: string;\r\n}\r\n\r\nconst AddThread = ({ threadID, loadThreads }: Props) => {\r\n  const [addThreadOn, setAddThreadOn] = useState<boolean>(false);\r\n  const server = process.env.REACT_APP_API_SERVER;\r\n  const [content, setContent] = useState<string>(\"\");\r\n  const [title, setTitle] = useState<string>(\"\");\r\n  const { username } = useContext(UserContext);\r\n\r\n  /** Makes a post to the server */\r\n  async function makeThread() {\r\n    const thread: NewThread = {\r\n      username: username,\r\n      content: content,\r\n      title: title,\r\n    };\r\n\r\n    try {\r\n      const result = await fetch(server + \"newThread\", {\r\n        body: JSON.stringify(thread),\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        method: \"POST\",\r\n      });\r\n      const response = await result.json();\r\n      loadThreads();\r\n      setAddThreadOn((current) => !current);\r\n    } catch (error) {\r\n      // TODO error handling\r\n    }\r\n  }\r\n\r\n  /** Renders the input form if needed */\r\n  function inputForm() {\r\n    if (addThreadOn) {\r\n      return (\r\n        <div className=\"form-group mt-4\">\r\n          <label className=\"\">Title</label>\r\n          <input\r\n            type=\"text\"\r\n            className=\"form-control\"\r\n            onChange={(e) => setTitle(e.target.value)}\r\n          />\r\n          <label className=\"\">Content</label>\r\n          <textarea\r\n            onChange={(e) => setContent(e.target.value)}\r\n            className=\"form-control border border-secondary\"\r\n          />\r\n          <button onClick={makeThread} className=\"btn btn-primary mt-2\">\r\n            Submit\r\n          </button>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <button\r\n        className=\"btn btn-primary\"\r\n        onClick={() => setAddThreadOn((current) => !current)}\r\n      >\r\n        Add Thread\r\n      </button>\r\n    );\r\n  }\r\n\r\n  return <div className=\"mb-5\">{inputForm()}</div>;\r\n};\r\n\r\nexport default AddThread;\r\n","import { useHistory, Link } from \"react-router-dom\";\r\nimport { ThreadObject } from \"./Thread\";\r\n\r\ninterface Props {\r\n  thread: ThreadObject;\r\n}\r\n\r\nconst ThreadCard = ({ thread }: Props) => {\r\n  const id = thread._id;\r\n  const title = thread.title;\r\n  const content = thread.content;\r\n  const history = useHistory();\r\n\r\n  return (\r\n    <Link to={`/thread/${id}`}>\r\n      <div className=\"border border-primary rounded my-2 p-2\">\r\n        <h4>{title}</h4>\r\n        <p>{content}</p>\r\n      </div>\r\n    </Link>\r\n  );\r\n};\r\n\r\nexport default ThreadCard;\r\n","import { useState, useEffect } from \"react\";\r\nimport AddThread from \"./AddThread\";\r\nimport ThreadCard from \"./ThreadCard\";\r\n\r\nconst Home = () => {\r\n  const [threads, setThreads] = useState([]);\r\n  const server = process.env.REACT_APP_API_SERVER;\r\n\r\n  async function loadThreads() {\r\n    const res = await fetch(server + \"getThreads\");\r\n    const jsoned = await res.json();\r\n    setThreads(jsoned);\r\n  }\r\n\r\n  // TODO search for posts\r\n  useEffect(() => {\r\n    loadThreads();\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      <h1 className=\"font-weight-bold my-3\">Home page</h1>\r\n      {threads.map((thread) => (\r\n        <ThreadCard key={thread._id} thread={thread} />\r\n      ))}\r\n      <AddThread loadThreads={loadThreads} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Home;\r\n","import Header from \"./Header\";\nimport Footer from \"./Footer\";\nimport Login from \"./Login\";\nimport Thread from \"./Thread\";\nimport Register from \"./Register\";\nimport Home from \"./Home\";\nimport { useState } from \"react\";\nimport { HashRouter as Router, Switch, Route, Link } from \"react-router-dom\";\nimport \"./App.css\";\nimport { UserContext } from \"./UserContext\";\n\nfunction App() {\n  const [username, setUsername] = useState(\"\");\n\n  return (\n    <Router basename=\"/\">\n      <UserContext.Provider value={{ username, setUsername }}>\n        <Header />\n        <Switch>\n          <Route path=\"/register\">\n            <Register />\n          </Route>\n          <Route path=\"/login\">\n            <Login />\n          </Route>\n          <Route path=\"/thread/:id\">\n            <Thread />\n          </Route>\n          <Route path=\"/\">\n            <Home />\n          </Route>\n        </Switch>\n        <Footer />\n      </UserContext.Provider>\n    </Router>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n\n"],"sourceRoot":""}