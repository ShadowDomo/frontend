(this.webpackJsonpfakeshop=this.webpackJsonpfakeshop||[]).push([[0],{37:function(e,t,n){},38:function(e,t,n){"use strict";n.r(t);var r=n(2),s=n.n(r),c=n(22),a=n.n(c),i=n(3),o=n(8),l=n(4),u=n.n(l),j=n(7),d=n(5),b=Object(r.createContext)(null),h=n(1),m=function(){var e="https://desolate-spire-28464.herokuapp.com/api/",t=Object(r.useContext)(b),n=t.username,s=t.setUsername,c=Object(d.f)(),a=Object(d.g)();function i(){return(i=Object(j.a)(u.a.mark((function t(){var n,r,i;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=localStorage.getItem("sessionID"),t.prev=1,t.next=4,fetch(e+"getUsername/"+n);case 4:return r=t.sent,t.next=7,r.json();case 7:if((i=t.sent).username||["/login","/register"].includes(a.pathname)){t.next=11;break}return c.push("/login"),t.abrupt("return");case 11:s(i.username),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(1),c.push("/login");case 17:case"end":return t.stop()}}),t,null,[[1,14]])})))).apply(this,arguments)}return Object(r.useEffect)((function(){!function(){i.apply(this,arguments)}()}),[]),Object(h.jsxs)("div",{children:[Object(h.jsx)("h6",{className:"text-white",children:n}),Object(h.jsxs)("div",{className:"d-flex flex-row",children:[Object(h.jsx)(o.b,{className:"mr-3",to:"/login",onClick:function(){localStorage.removeItem("sessionID"),s("")},children:n&&n.length>0?Object(h.jsx)("h5",{className:"text-primary",children:"logout"}):"/register"===a.pathname?Object(h.jsx)("h5",{children:"Login"}):void 0}),Object(h.jsx)(o.b,{to:"/register",children:function(){if("/register"!==a.pathname)return n?void 0:Object(h.jsx)("h5",{className:"font-weight-bold",children:"Register"})}()})]})]})},p=function(){return Object(h.jsxs)("div",{className:"bg-dark navbar w-100 static-top",children:[Object(h.jsx)(o.b,{to:"/home",children:Object(h.jsx)("h1",{className:"navbar-brand mx-3 text-light",children:"TEMPORARYNAMEgay"})}),Object(h.jsx)(m,{})]})},O=function(){return Object(h.jsx)("div",{children:Object(h.jsx)(p,{})})},x=function(){return Object(h.jsx)("div",{className:"bg-dark w-100",style:{position:"fixed",bottom:0},children:Object(h.jsx)("h6",{className:"text-light m-2",children:"I am footer"})})},f=function(){var e=Object(r.useState)(""),t=Object(i.a)(e,2),n=t[0],s=t[1],c=Object(r.useState)(""),a=Object(i.a)(c,2),l=a[0],m=a[1],p=Object(r.useState)(""),O=Object(i.a)(p,2),x=O[0],f=O[1],v=Object(d.f)(),g=Object(r.useContext)(b).username,N=Object(r.useContext)(b).setUsername,y="https://desolate-spire-28464.herokuapp.com/api/";function w(){return(w=Object(j.a)(u.a.mark((function e(t){var r,s,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),r={username:n,password:l},y+"login",e.prev=3,e.next=6,fetch("https://desolate-spire-28464.herokuapp.com/api/login",{body:JSON.stringify(r),headers:{"Content-Type":"application/json"},method:"POST"});case 6:return s=e.sent,e.next=9,s.json();case 9:if(!(c=e.sent).hasOwnProperty("error")){e.next=13;break}return f(c.error),e.abrupt("return");case 13:localStorage.setItem("sessionID",c.sessionID),N(n),v.push("/home"),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(3),f("Failed to login. Please try again.");case 21:case"end":return e.stop()}}),e,null,[[3,18]])})))).apply(this,arguments)}return Object(r.useEffect)((function(){g&&(localStorage.removeItem("sessionID"),N(""),s(""))}),[]),Object(h.jsx)("div",{className:"container",children:Object(h.jsx)("div",{className:"row",children:Object(h.jsxs)("div",{className:"col-12 col-sm-8 offset-sm-2 col-xl-6 offset-xl-3",children:[Object(h.jsxs)("form",{className:"mt-5",children:[Object(h.jsx)("h1",{className:"mb-4 text-center",children:"Login"}),Object(h.jsxs)("div",{className:"form-group mb-2",children:[Object(h.jsx)("label",{children:"Username"}),Object(h.jsx)("input",{type:"text",value:n,onChange:function(e){return s(e.target.value)},className:"form-control",placeholder:"Enter username"})]}),Object(h.jsxs)("div",{className:"form-group mb-3",children:[Object(h.jsx)("label",{children:"Password"}),Object(h.jsx)("input",{type:"password",value:l,onChange:function(e){return m(e.target.value)},className:"form-control",placeholder:"Enter password"})]}),Object(h.jsx)("button",{type:"submit",onClick:function(e){return w.apply(this,arguments)},className:"btn btn-primary",children:"Submit"})]}),Object(h.jsx)(o.b,{to:"/register",children:Object(h.jsx)("div",{className:"mt-1",children:"New user? Click here to register!"})}),x.length>0&&Object(h.jsx)("h5",{className:"mt-3 alert alert-danger",children:x})]})})})},v=n(25),g=n(20),N=n(0),y=n(24),w=function(e){var t=e.threadID,n=e.loadThread,s=e.noRenderButton,c=e.parentPostID,a=e.setRenderReplyForm,o=Object(r.useState)(!1),l=Object(i.a)(o,2),d=l[0],m=l[1],p="https://desolate-spire-28464.herokuapp.com/api/",O=Object(r.useState)(""),x=Object(i.a)(O,2),f=x[0],v=x[1],g=Object(r.useContext)(b).username,N=Object(r.useState)(""),y=Object(i.a)(N,2),w=y[0],k=y[1];function S(){return C.apply(this,arguments)}function C(){return(C=Object(j.a)(u.a.mark((function e(){var r,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={username:g,content:f,date:(new Date).toLocaleString(),threadID:t,childrenIDs:[],parentID:c,imageURL:w},e.prev=1,e.next=4,fetch(p+"makePost",{body:JSON.stringify(r),headers:{"Content-Type":"application/json"},method:"POST"});case 4:return s=e.sent,e.next=7,s.json();case 7:e.sent,n(),m((function(e){return!e})),e.next=15;break;case 12:return e.prev=12,e.t0=e.catch(1),e.abrupt("return");case 15:I();case 16:case"end":return e.stop()}}),e,null,[[1,12]])})))).apply(this,arguments)}function I(){m(!1),a&&a(!1)}return Object(r.useEffect)((function(){m(void 0!==s)}),[]),Object(h.jsxs)(h.Fragment,{children:[d&&Object(h.jsxs)("div",{className:"form-group mt-4 mb-5",children:[Object(h.jsx)("label",{className:"",children:"Content"}),Object(h.jsx)("textarea",{placeholder:"What are your thoughts?",onChange:function(e){return v(e.target.value)},className:"form-control border border-secondary",rows:6}),Object(h.jsxs)("div",{className:"mt-3",children:[Object(h.jsx)("label",{children:"Image url"}),Object(h.jsx)("input",{type:"text",onChange:function(e){return k(e.target.value)},className:"form-control border border-secondary"})]}),Object(h.jsxs)("div",{className:"d-flex flex-row justify-content-end",children:[Object(h.jsx)("button",{onClick:function(e){return I()},className:"btn btn-primary mt-2",children:"Cancel"}),Object(h.jsx)("button",{onClick:S,className:"btn btn-primary mt-2 ml-3 bg-secondary text-dark border border-secondary",children:"Submit"})]})]}),!d&&!s&&Object(h.jsx)("div",{children:Object(h.jsx)("button",{className:"btn btn-primary",onClick:function(){return m((function(e){return!e}))},children:"Add Reply"})})]})},k=function e(t){var n=t.post,s=t.threadID,c=t.loadThread,a=t.getPost,o=t.indentLevel,l=Object(r.useState)(!1),u=Object(i.a)(l,2),j=u[0],d=u[1],b=Object(r.useState)(!0),m=Object(i.a)(b,2),p=m[0],O=m[1],x=20*o;return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("div",{style:{marginLeft:x,width:"auto"},children:[Object(h.jsxs)("div",{className:"container my-3 border border-secondary rounded bg-dark",children:[Object(h.jsxs)("div",{className:"row p-2 d-flex justify-content-between",children:[Object(h.jsx)("h6",{className:"text-white ml-1",children:n.username}),Object(h.jsx)("h6",{children:Object(h.jsx)("small",{className:"ml-3 text-muted",children:n.date})})]}),Object(h.jsx)("div",{className:"row pl-2",children:Object(h.jsx)("p",{className:"text-white ml-1",children:n.content})}),function(){if(""!==n.imageURL)return Object(h.jsx)("img",{className:"img-fluid mb-2",style:{maxWidth:"400px"},src:n.imageURL,alt:""})}(),Object(h.jsx)("div",{className:"row",children:Object(h.jsxs)("div",{className:"col d-flex",children:[Object(h.jsx)("div",{children:Object(h.jsx)("h6",{className:"text-muted",children:Object(h.jsx)("small",{style:{cursor:"pointer"},onClick:function(e){return d((function(e){return!e}))},children:"Reply"})})}),Object(h.jsx)("div",{className:"ml-3",children:Object(h.jsx)("h6",{className:"text-muted",children:Object(h.jsxs)("small",{style:{cursor:"pointer"},onClick:function(e){O((function(e){return!e}))},children:[!p&&n.childrenIDs.length>0&&"Show Replies",p&&n.childrenIDs.length>0&&"Hide Replies"]})})})]})})]}),function(){if(j)return Object(h.jsx)(w,{threadID:s,loadThread:c,noRenderButton:!0,parentPostID:n.id,setRenderReplyForm:d})}()]}),p&&n.childrenIDs.map((function(t){var n=a(t);if(null!==n)return Object(h.jsx)(e,{loadThread:c,post:n,getPost:a,threadID:s,indentLevel:o+1},t)}))]})},S=function(){var e=Object(r.useContext)(b),t=e.username,n=(e.setUsername,Object(r.useState)({title:"",content:"",username:"",_id:"",posts:[]})),s=Object(i.a)(n,2),c=s[0],a=s[1],o="https://desolate-spire-28464.herokuapp.com/api/",l=Object(d.h)().id,m=Object(d.f)(),p=Object(r.useState)([]),O=Object(i.a)(p,2),x=O[0],f=O[1];function S(){return C.apply(this,arguments)}function C(){return(C=Object(j.a)(u.a.mark((function e(){var t,n,r,s,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(o+"getThread/"+l);case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,a(n),f([]),r=Object(g.a)(n.posts);try{for(c=function(){var e=s.value;null===e.parentID&&f((function(t){return[].concat(Object(v.a)(t),[e])}))},r.s();!(s=r.n()).done;)c()}catch(i){r.e(i)}finally{r.f()}case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(){return D.apply(this,arguments)}function D(){return(D=Object(j.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(o+"deleteThread/"+l);case 2:e.sent,m.push("/home");case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(e){var t,n=Object(g.a)(c.posts);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.id===e)return r}}catch(s){n.e(s)}finally{n.f()}return null}return Object(r.useEffect)((function(){S()}),[]),Object(h.jsxs)("div",{className:"container mt-3 mb-5",children:[Object(h.jsx)("div",{className:"row",children:Object(h.jsxs)("div",{className:"col d-inline-flex align-items-center",children:[Object(h.jsx)("h1",{className:"mb-0",children:c.title}),function(){if(c.username===t)return Object(h.jsx)(N.b.Provider,{value:{size:"1em"},children:Object(h.jsx)(y.a,{onClick:I,style:{cursor:"pointer"},className:"ml-2"})})}()]})}),Object(h.jsxs)("h6",{children:["- ",c.username]}),Object(h.jsx)("p",{children:c.content.substring(1,500)}),Object(h.jsx)(w,{threadID:l,loadThread:S}),Object(h.jsx)("h4",{className:"mt-5",children:"Replies:"}),Object(h.jsx)("div",{className:"container ",children:x.map((function(e,t){return Object(h.jsx)(k,{post:e,threadID:l,loadThread:S,getPost:T,indentLevel:0},t)}))})]})},C=function(){var e=Object(r.useState)(""),t=Object(i.a)(e,2),n=t[0],s=t[1],c=Object(r.useState)(""),a=Object(i.a)(c,2),l=a[0],b=a[1],m=Object(r.useState)(""),p=Object(i.a)(m,2),O=p[0],x=p[1],f=Object(r.useState)(""),v=Object(i.a)(f,2),g=v[0],N=v[1],y=Object(r.useState)(""),w=Object(i.a)(y,2),k=w[0],S=w[1],C="https://desolate-spire-28464.herokuapp.com/api/",I=Object(d.f)();function D(){if(l===O)return!0}function T(){return(T=Object(j.a)(u.a.mark((function e(t){var r,s,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),S(""),N(""),D()){e.next=5;break}return e.abrupt("return");case 5:return r={username:n,password:l},C+"register",e.prev=7,e.next=10,fetch("https://desolate-spire-28464.herokuapp.com/api/register",{body:JSON.stringify(r),headers:{"Content-Type":"application/json"},method:"POST"});case 10:return s=e.sent,e.next=13,s.json();case 13:if(!(c=e.sent).hasOwnProperty("error")){e.next=17;break}return S(c.error),e.abrupt("return");case 17:return N(c.status),e.next=20,new Promise((function(e){return setTimeout(e,1500)}));case 20:I.push("/login"),console.log(c),e.next=27;break;case 24:e.prev=24,e.t0=e.catch(7),console.log(e.t0);case 27:case"end":return e.stop()}}),e,null,[[7,24]])})))).apply(this,arguments)}return Object(h.jsx)("div",{className:"container",children:Object(h.jsx)("div",{className:"row",children:Object(h.jsxs)("div",{className:"col-12 col-sm-8 offset-sm-2 col-xl-6 offset-xl-3",children:[Object(h.jsxs)("form",{className:"mt-5",children:[Object(h.jsx)("h1",{className:"mb-4 text-center",children:"Register"}),Object(h.jsxs)("div",{className:"form-group mb-2",children:[Object(h.jsx)("label",{children:"Username"}),Object(h.jsx)("input",{type:"text",value:n,onChange:function(e){return s(e.target.value)},className:"form-control",placeholder:"Enter username"})]}),Object(h.jsxs)("div",{className:"form-group mb-2",children:[Object(h.jsx)("label",{children:"Password"}),Object(h.jsx)("input",{type:"password",value:l,onChange:function(e){return b(e.target.value)},className:"form-control",placeholder:"Enter password"})]}),Object(h.jsxs)("div",{className:"form-group mb-3",children:[Object(h.jsx)("label",{children:"Confirm Password"}),Object(h.jsx)("input",{type:"password",value:O,onChange:function(e){return x(e.target.value)},className:"form-control",placeholder:"Enter password"})]}),Object(h.jsx)("button",{type:"submit",onClick:function(e){return function(e){return T.apply(this,arguments)}(e)},className:"btn btn-primary",children:"Submit"})]}),Object(h.jsx)(o.b,{to:"/login",children:Object(h.jsx)("div",{className:"mt-1",children:"Already registered? Click here to login!"})}),g.length>0&&Object(h.jsx)("h5",{className:"mt-3 alert alert-success",children:g}),k.length>0&&Object(h.jsx)("h5",{className:"mt-3 alert alert-danger",children:k})]})})})},I=function(e){e.threadID;var t=e.loadThreads,n=Object(r.useState)(!1),s=Object(i.a)(n,2),c=s[0],a=s[1],o="https://desolate-spire-28464.herokuapp.com/api/",l=Object(r.useState)(""),d=Object(i.a)(l,2),m=d[0],p=d[1],O=Object(r.useState)(""),x=Object(i.a)(O,2),f=x[0],v=x[1],g=Object(r.useContext)(b).username;function N(){return y.apply(this,arguments)}function y(){return(y=Object(j.a)(u.a.mark((function e(){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={username:g,content:m,title:f},e.prev=1,e.next=4,fetch(o+"newThread",{body:JSON.stringify(n),headers:{"Content-Type":"application/json"},method:"POST"});case 4:return r=e.sent,e.next=7,r.json();case 7:e.sent,t(),a((function(e){return!e})),e.next=14;break;case 12:e.prev=12,e.t0=e.catch(1);case 14:case"end":return e.stop()}}),e,null,[[1,12]])})))).apply(this,arguments)}return Object(h.jsx)("div",{className:"mb-5",children:c?Object(h.jsxs)("div",{className:"form-group mt-4",children:[Object(h.jsx)("label",{className:"",children:"Title"}),Object(h.jsx)("input",{type:"text",className:"form-control",onChange:function(e){return v(e.target.value)}}),Object(h.jsx)("label",{className:"",children:"Content"}),Object(h.jsx)("textarea",{onChange:function(e){return p(e.target.value)},className:"form-control border border-secondary"}),Object(h.jsx)("button",{onClick:N,className:"btn btn-primary mt-2",children:"Submit"})]}):Object(h.jsx)("button",{className:"btn btn-primary",onClick:function(){return a((function(e){return!e}))},children:"Add Thread"})})},D=function(e){var t=e.thread,n=t._id,r=t.title,s=t.content;Object(d.f)();return Object(h.jsx)(o.b,{to:"/thread/".concat(n),children:Object(h.jsxs)("div",{className:"border border-primary rounded my-2 p-2",children:[Object(h.jsx)("h4",{children:r}),Object(h.jsx)("p",{children:s})]})})},T=function(){var e=Object(r.useState)([]),t=Object(i.a)(e,2),n=t[0],s=t[1],c="https://desolate-spire-28464.herokuapp.com/api/";function a(){return o.apply(this,arguments)}function o(){return(o=Object(j.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(c+"getThreads");case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,s(n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.useEffect)((function(){a()}),[]),Object(h.jsxs)("div",{className:"container",children:[Object(h.jsx)("h1",{className:"font-weight-bold my-3",children:"Home page"}),n.map((function(e){return Object(h.jsx)(D,{thread:e},e._id)})),Object(h.jsx)(I,{loadThreads:a})]})};n(37);var P=function(){var e=Object(r.useState)(""),t=Object(i.a)(e,2),n=t[0],s=t[1];return Object(h.jsx)(o.a,{basename:"/",children:Object(h.jsxs)(b.Provider,{value:{username:n,setUsername:s},children:[Object(h.jsx)(O,{}),Object(h.jsxs)(d.c,{children:[Object(h.jsx)(d.a,{path:"/register",children:Object(h.jsx)(C,{})}),Object(h.jsx)(d.a,{path:"/login",children:Object(h.jsx)(f,{})}),Object(h.jsx)(d.a,{path:"/thread/:id",children:Object(h.jsx)(S,{})}),Object(h.jsx)(d.a,{path:"/home",children:Object(h.jsx)(T,{})}),Object(h.jsx)(d.a,{path:"/",children:Object(h.jsx)(f,{})})]}),Object(h.jsx)(x,{})]})})};a.a.render(Object(h.jsx)(s.a.StrictMode,{children:Object(h.jsx)(P,{})}),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.81553710.chunk.js.map